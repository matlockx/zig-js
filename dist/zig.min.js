!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){var r,o;r=[n,t,n(1)],void 0===(o=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n.Options.logging&&console.log.apply(console,[e].concat(t))}},t.sleep=function(e){return new Promise(function(t){return window.setTimeout(t,e)})}}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n,t,n(4)],void 0===(o=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Options={get logging(){return!0===n.KV.get("logging")},set logging(e){n.KV.set("logging",e)},get version(){return n.KV.get("version")||"latest"},set version(e){n.KV.set("version",e)},get winningClassOverride(){return n.KV.get("winning-class-override")},set winningClassOverride(e){n.KV.set("winning-class-override",e)},get debuggingLayer(){return this.logging||"latest"!==this.version||null!=this.winningClassOverride}}}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n,t,n(0)],void 0===(o=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n.logger("[zig-msg]"),o=function(){function e(e){var t=this;this.partnerWindow=e,this.handlers={},this.eventHandler=function(e){return t.handleEvent(e)},window.addEventListener("message",this.eventHandler)}return e.prototype.close=function(){window.removeEventListener("message",this.eventHandler)},e.prototype.send=function(e){null!=e&&(r("Send message of type "+(e.command||e),e),this.partnerWindow.postMessage(e,"*"))},e.prototype.sendError=function(e){var t=i(e);null!=t&&(r("Sending error value:",t),this.partnerWindow.postMessage(t,"*"))},e.prototype.register=function(e,t){this.handlers[e]=(this.handlers[e]||[]).concat(t)},e.prototype.unregister=function(e,t){this.handlers[e]=(this.handlers[e]||[]).filter(function(e){return e!==t})},e.prototype.registerWildcard=function(e){this.register("*",e)},e.prototype.handleEvent=function(e){if(e.source===this.partnerWindow){var t="string"==typeof e.data?e.data:(e.data||{}).command;if(null==t&&e.data&&null!=e.data.type&&(t="error"),"string"==typeof t){var n=e.data,r=this.handlers[t]||[];r&&r.length?this.dispatch(n,r):this.dispatch(n,this.handlers["*"]||[])}}},e.prototype.dispatch=function(e,t){t.forEach(function(t){try{t(e)}catch(t){r("Error in handling message "+e+":",t)}})},e}();function i(e){if(null==e)return null;if(e.type&&e.title&&void 0!==e.status&&void 0!==e.details)return e;if("string"==typeof e.type&&"string"==typeof e.message)return{type:"urn:x-tipp24:remote-client-error",title:"Remote error",status:e.type,details:e.message};var t=e.responseText||e.body;if("string"==typeof t)try{var n=JSON.parse(t);if(n.error&&n.status)return{type:"urn:x-tipp24:remote-client-error",title:"Remote error",details:n.error,status:n.status};if(n.type&&n.title&&n.details)return n}catch(e){}return{type:"urn:x-tipp24:remote-client-error",title:"Remote error",status:500,details:e.toString()}}t.MessageClient=o,t.toErrorValue=i}.apply(t,r))||(e.exports=o)},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KV={set:function(e,t){try{localStorage.setItem("kv."+e,JSON.stringify(t))}catch(n){console.log("Could not store KV:",e,t,n)}},get:function(e){try{var t=localStorage.getItem("kv."+e)||"null";return JSON.parse(t)}catch(t){return console.log("Could not read KV:",e,t),null}}}}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){"use strict";(function(e){var n=setTimeout;function r(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function i(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void a(t.promise,e)}s(t.promise,r)}else(1===e._state?s:a)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void c((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(t){a(e,t)}var r,i}function a(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function c(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(r);return i(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},o.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},o.all=function(e){return new o(function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(t){i(e,t)},n)}r[e]=s,0==--o&&t(r)}catch(e){n(e)}}for(var s=0;s<r.length;s++)i(s,r[s])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},o._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){n(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.a=o}).call(this,n(10).setImmediate)},function(e,t,n){var r,o,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};r=[n,t,n(0)],void 0===(o=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeRequestLocally=function(e){return i(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return[4,o(this.request)];case 1:if((e=t.sent()).error)throw e.error;return[2,e.response]}})})};var r=n.logger("[zig-xhr]");function o(e){return i(this,void 0,void 0,function(){var t,n;return s(this,function(o){return r("Execute http request",e),(t=new XMLHttpRequest).open(e.method,e.path),Object.keys(e.headers||{}).forEach(function(n){t.setRequestHeader(n,e.headers[n])}),(n=/X-CSRF-TOKEN=([^;]+)/.exec(document.cookie||""))&&n[1]&&t.setRequestHeader("X-CSRF-TOKEN",n[1]),t.send(e.body),[2,new Promise(function(e){t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE){var n={response:{statusCode:t.status,body:t.responseText}};e(n)}},t.onerror=function(t){e({error:t.message||""})}})]})})}t.registerRequestListener=function(e,t){var n=this;void 0===t&&(t=o),e.register("zig.XMLHttpRequest.request",function(r){return i(n,void 0,void 0,function(){var n,o;return s(this,function(i){switch(i.label){case 0:return n=r.request,[4,t(n.data)];case 1:return o=i.sent(),e.send({command:"zig.XMLHttpRequest.result",result:{cid:n.cid,data:o}}),[2]}})})})};var a=1;t.executeRequestInParent=function(e,t){return i(this,void 0,void 0,function(){var n;return s(this,function(r){return n=t.path+":"+Date.now()+":"+a++,[2,new Promise(function(r,o){var i=function(t){var s=t.result;s.cid===n&&(e.unregister("zig.XMLHttpRequest.result",i),null!=s.data.error&&o(s.data.error),r(s.data.response))};e.register("zig.XMLHttpRequest.result",i),e.send({command:"zig.XMLHttpRequest.request",request:{cid:n,data:t}})})]})})}}.apply(t,r))||(e.exports=o)},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(s=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),i=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(i).concat([o]).join("\n")}var s;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o,i,s,a,u=1,c={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){h(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){i.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&h(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(s+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return c[u]=o,r(u),u++},d.clearImmediate=p}function p(e){delete c[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(3),n(8))},function(e,t,n){(function(e){var r=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(9),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(3))},function(e,t,n){"use strict";n.r(t);var r=n(5),o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==o)return o;throw new Error("unable to locate global object")}();o.Promise||(o.Promise=r.a)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=window.__zig_events=window.__zig_events||{};function r(e,t){return n[t]||("interactive"===document.readyState&&(n.DOMContentLoaded=!0),e.addEventListener(t,function(){n[t]=!0})),function(r){n[t]?window.setTimeout(r,0):e.addEventListener(t,r)}}t.onDOMLoad=r(document,"DOMContentLoaded"),t.onLoad=r(window,"load")}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientVersion="0.2.13",t.buildTime=1520843412422}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectStyle=function(e){var t=document.createElement("style");t.textContent=e,document.body.appendChild(t)}}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r,o;r=[n,t,n(0),n(1)],void 0===(o=function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delegateToVersion=function(e){var t=n.logger("[delegate]");if(window.__zig_delegated)return!1;window.__zig_delegated=!0;var o=r.Options.version;if(null==o||"latest"===o)return!1;var i="https://lib.zig.services/"+o+"/"+e;if(t("Delegate script "+e+" to "+i),"loading"===document.readyState)document.write('<script src="'+i+'"><\/script>');else{var s=document.createElement("script");s.src=i,s.async=!1,s.defer=!1,document.body.appendChild(s)}return!0}}.apply(t,r))||(e.exports=o)},function(e,t,n){(e.exports=n(7)(!1)).push([e.i,"#loader img{max-width:inherit;width:100%;max-height:100%}#loaderImageHolder,#loaderImageHolder img{-webkit-transform:none;transform:none;position:absolute;top:0;left:0}#loaderImageHolder{width:100%;max-height:inherit!important;height:100%}#loadingBarHolder{z-index:1}#loadingBarHolder.loaded{display:none!important}",""])},function(e,t,n){var r,o,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};r=[n,t,n(0),n(14),n(12),n(6),n(2)],void 0===(o=function(e,t,r,o,a,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=new c.MessageClient(window.parent),f=(window.XMLHttpRequest,function(){function e(){this.request={method:"GET",path:"/",body:"",headers:{}},this.loadHandlers=[],this.errorHandlers=[],this.readyStateChangeHandlers=[],this.readyState=XMLHttpRequest.UNSENT,this.status=0,this.responseText=null,this.onreadystatechange=null,this.onerror=null,this.onload=null}return e.prototype.setRequestHeader=function(e,t){this.request.headers[e]=t},e.prototype.open=function(e,t){this.request.method=e.toUpperCase(),this.request.path=t,this.readyState=XMLHttpRequest.OPENED},e.prototype.send=function(e){void 0===e&&(e=null),this.request.body=e,this._execute()},e.prototype._execute=function(){return i(this,void 0,void 0,function(){var e,t,n;return s(this,function(r){switch(r.label){case 0:e=new RegExp("^(/product/iwg|/iwg)").test(this.request.path),this.readyState=XMLHttpRequest.LOADING,r.label=1;case 1:return r.trys.push([1,6,,7]),t=void 0,e?[4,u.executeRequestInParent(l,this.request)]:[3,3];case 2:return t=r.sent(),[3,5];case 3:return[4,u.executeRequestLocally(this.request)];case 4:t=r.sent(),r.label=5;case 5:return this.responseText=t.body,this.status=t.statusCode,this.readyState=XMLHttpRequest.DONE,this._handlers(this.onload,this.loadHandlers),this._handlers(this.onreadystatechange,this.readyStateChangeHandlers),[3,7];case 6:return n=r.sent(),this.readyState=XMLHttpRequest.DONE,this._handlers(this.onerror,this.errorHandlers,n),[3,7];case 7:return[2]}})})},e.prototype._handlers=function(e,t){for(var n=this,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];e&&e.apply(void 0,[this].concat(r)),t.forEach(function(e){return e.apply(void 0,[n].concat(r))})},e.prototype.addEventListener=function(e,t){switch(e){case"load":this.loadHandlers.push(t);break;case"error":this.errorHandlers.push(t);break;case"readystatechange":this.readyStateChangeHandlers.push(t);break;default:throw new Error("Unknown event type: "+e)}},e}());t.isLegacyGame=function(){return/\blegacyGame=true\b/.test(location.href)},t.patchLegacyGame=function(){window.XMLHttpRequest=f,a.onDOMLoad(function(){var e=r.logger("[zig-legacy]");null!=document.querySelector("#gamecontainer")&&(e("Detected instant win gaming game."),o.injectStyle(n(16)),a.onLoad(function(){e("Do extra monkey patching for instant win gaming games");try{!function(){var e=r.logger("[zig-legacy]"),t=null;window.jQuery&&window.jQuery.ajaxPrefilter(function(n){if((n.url||"").match("/tickets$")){var r=n.success||function(){};n.success=function(n,o,i){try{n&&n.id&&n.externalId&&(e("Remember ticket info for later"),t={ticketId:n.id,externalId:n.externalId,ticketNumber:n.ticketNumber})}catch(t){e("Could not get ticketInfo from response",t)}return r.call(this,n,o,i)}}});var n=window.parent,o=window.parent.postMessage,i={location:window.parent.location,postMessage:function(r){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];try{t&&r&&"gameStarted"===r.command&&(e("Intercepted gameStarted message"),["ticketId","externalId","ticketNumber"].forEach(function(n){null==r[n]&&null!=t[n]&&(e("Adding "+n+" = "+t[n]+" to post message"),r[n]=t[n])}),t=null)}catch(t){e("Could not add ticketInfo to message",t)}return o.call.apply(o,[n,r].concat(i))}};Object.defineProperty(window,"parent",{get:function(){return i}})}()}catch(t){e("Could not patch legacy game:",t)}}))})}}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n,t,n(11)],void 0===(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectAssignPolyfill=function(){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{writable:!0,configurable:!0,value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n}})}}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};r=[n,t,n(17),n(0),n(2),n(18),n(13),n(15),n(1),n(6)],void 0===(o=function(e,t,n,r,o,a,u,c,l,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=r.logger("[zig-client]");function p(e){return null!=e&&"object"==typeof e&&e.rows&&e.rows.length?e.rows.length:1}var h=function(){function e(){this.messageClient=new o.MessageClient(window.parent)}return e.prototype.buyTicket=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),i(this,void 0,void 0,function(){var n=this;return s(this,function(r){switch(r.label){case 0:return[4,this.propagateErrors(function(){return i(n,void 0,void 0,function(){var n,r,o;return s(this,function(i){switch(i.label){case 0:return n=t.quantity||p(e),r="/product/iwg/tickets?quantity="+n,[4,this.request("POST",r,e)];case 1:return o=i.sent(),this.sendGameStartedEvent(t,o),[2,o]}})})})];case 1:return[2,r.sent()]}})})},e.prototype.demoTicket=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),i(this,void 0,void 0,function(){var n=this;return s(this,function(r){switch(r.label){case 0:return[4,this.propagateErrors(function(){return i(n,void 0,void 0,function(){var n,r,o,i;return s(this,function(s){switch(s.label){case 0:return n=t.quantity||p(e),r=l.Options.winningClassOverride&&"&wc="+l.Options.winningClassOverride.winningClass||"",o="/product/iwg/demo?quantity="+n+r,[4,this.request("POST",o,e)];case 1:return i=s.sent(),this.sendGameStartedEvent(t,i),[2,i]}})})})];case 1:return[2,r.sent()]}})})},e.prototype.sendGameStartedEvent=function(e,t){var n=e.alreadySettled;void 0===n&&(n=!(t.game||{supportsResume:!0}).supportsResume),this.messageClient.send({command:"gameStarted",ticket:t,alreadySettled:!!n})},e.prototype.settleTicket=function(e){return i(this,void 0,void 0,function(){var t=this;return s(this,function(n){switch(n.label){case 0:return[4,this.propagateErrors(function(){return i(t,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return t="/product/iwg/tickets/"+encodeURIComponent(e)+"/settle",[4,this.request("POST",t)];case 1:return n=r.sent(),this.messageClient.send({command:"gameSettled",response:n}),[2]}})})})];case 1:return[2,n.sent()]}})})},e.prototype.propagateErrors=function(e){return i(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return[2,n.sent()];case 2:throw t=n.sent(),this.messageClient.sendError(t),t;case 3:return[2]}})})},e.prototype.request=function(e,t,n){return void 0===n&&(n=null),i(this,void 0,void 0,function(){var r;return s(this,function(i){switch(i.label){case 0:return[4,f.executeRequestInParent(this.messageClient,{method:e,path:t,body:null===n?null:JSON.stringify(n),headers:{}})];case 1:if(r=i.sent(),2===Math.floor(r.statusCode/100))return[2,JSON.parse(r.body||"null")];throw o.toErrorValue(r)}})})},e.prototype.trackGameHeight=function(e){var t=this,n=0;var r=null;"string"!=typeof e&&(r=e),window.setInterval(function(){if(null==r&&"string"==typeof e&&(r=document.querySelector(e)),null!=r){var o=function e(t){var n=t.offsetTop;return t.offsetParent?e(t.offsetParent)+t.offsetTop:n}(r);Math.abs(o-n)>1&&(n=o,t.publishMessage("updateGameHeight",{height:o}))}},100)},e.prototype.publishMessage=function(e,t){var n=Object.assign({command:e},t);d("Publishing message ",n),window.parent.postMessage(n,"*")},e}();c.delegateToVersion("zig.min.js")||(window.console&&console.log&&(console.log(""),console.log("[zig] Initializing zig client in version "+u.clientVersion),console.log("[zig] compiled "+(Date.now()-u.buildTime)/1e3+"sec ago"),console.log("")),a.objectAssignPolyfill(),n.isLegacyGame()&&(d("Enable legacy game patches"),n.patchLegacyGame()),window.Zig=window.Zig||{},window.Zig.MessageClient=new o.MessageClient(window.parent),window.Zig.Client=new h,window.ZigClient=window.Zig.Client,window.ZigMessageClient=o.MessageClient)}.apply(t,r))||(e.exports=o)}]);