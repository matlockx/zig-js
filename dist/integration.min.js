!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=22)}({0:function(e,t,r){var n,i;n=[r,t,r(1)],void 0===(i=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r.Options.logging&&console.log.apply(console,[e].concat(t))}},t.sleep=function(e){return new Promise(function(t){return window.setTimeout(t,e)})}}.apply(t,n))||(e.exports=i)},1:function(e,t,r){var n,i;n=[r,t,r(4)],void 0===(i=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Options={get logging(){return!0===r.KV.get("logging")},set logging(e){r.KV.set("logging",e)},get version(){return r.KV.get("version")||"latest"},set version(e){r.KV.set("version",e)},get winningClassOverride(){return r.KV.get("winning-class-override")},set winningClassOverride(e){r.KV.set("winning-class-override",e)},get debuggingLayer(){return this.logging||"latest"!==this.version||null!=this.winningClassOverride}}}.apply(t,n))||(e.exports=i)},2:function(e,t,r){var n,i;n=[r,t,r(0)],void 0===(i=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r.logger("[zig-msg]"),i=function(){function e(e){var t=this;this.partnerWindow=e,this.handlers={},this.eventHandler=function(e){return t.handleEvent(e)},window.addEventListener("message",this.eventHandler)}return e.prototype.close=function(){window.removeEventListener("message",this.eventHandler)},e.prototype.send=function(e){null!=e&&(n("Send message of type "+(e.command||e),e),this.partnerWindow.postMessage(e,"*"))},e.prototype.sendError=function(e){var t=o(e);null!=t&&(n("Sending error value:",t),this.partnerWindow.postMessage(t,"*"))},e.prototype.register=function(e,t){this.handlers[e]=(this.handlers[e]||[]).concat(t)},e.prototype.unregister=function(e,t){this.handlers[e]=(this.handlers[e]||[]).filter(function(e){return e!==t})},e.prototype.registerWildcard=function(e){this.register("*",e)},e.prototype.handleEvent=function(e){if(e.source===this.partnerWindow){var t="string"==typeof e.data?e.data:(e.data||{}).command;if(null==t&&e.data&&null!=e.data.type&&(t="error"),"string"==typeof t){var r=e.data,n=this.handlers[t]||[];n&&n.length?this.dispatch(r,n):this.dispatch(r,this.handlers["*"]||[])}}},e.prototype.dispatch=function(e,t){t.forEach(function(t){try{t(e)}catch(t){n("Error in handling message "+e+":",t)}})},e}();function o(e){if(null==e)return null;if(e.type&&e.title&&void 0!==e.status&&void 0!==e.details)return e;if("string"==typeof e.type&&"string"==typeof e.message)return{type:"urn:x-tipp24:remote-client-error",title:"Remote error",status:e.type,details:e.message};var t=e.responseText||e.body;if("string"==typeof t)try{var r=JSON.parse(t);if(r.error&&r.status)return{type:"urn:x-tipp24:remote-client-error",title:"Remote error",details:r.error,status:r.status};if(r.type&&r.title&&r.details)return r}catch(e){}return{type:"urn:x-tipp24:remote-client-error",title:"Remote error",status:500,details:e.toString()}}t.MessageClient=i,t.toErrorValue=o}.apply(t,n))||(e.exports=i)},22:function(e,t,r){var n,i;n=[r,t,r(0),r(2),r(6)],void 0===(i=function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r.logger("[zig-int]"),s=function(){function e(e,t){var r=this;this.wrapper=e,this.frame=t,this.messageClient=new n.MessageClient(t.contentWindow),this.messageClient.register("updateGameHeight",function(e){return r.updateGameHeight(e.height)}),this.messageClient.register("updateGameSettings",function(e){return r.updateGameSettings(e.gameSettings)}),i.registerRequestListener(this.messageClient),this.messageClient.registerWildcard(function(e){return o("Got message of type "+e.command)})}return e.prototype.destroy=function(){o("Destroy event listeners from frame"),this.messageClient.close()},e.prototype.updateGameHeight=function(e){this.frame.style.height=e+"px"},e.prototype.updateGameSettings=function(e){e.aspect>0&&(this.wrapper.style.position="relative",this.wrapper.style.paddingBottom=100/e.aspect+"%",this.frame.style.position="absolute",this.frame.style.height="100%")},e}();function a(e,t){var r=new s(e,t),n=new MutationObserver(function(e){for(var i=0,o=e;i<o.length;i++){var s=o[i];if("childList"===s.type)for(var a=0;a<s.removedNodes.length;a++)if(s.removedNodes.item(a)===t)return n.disconnect(),void r.destroy()}});return n.observe(e,{childList:!0}),r.messageClient}function u(e,t,r){var n=t=t+"?config="+btoa(JSON.stringify(r)),i=document.createElement("iframe");i.src=n,i.allowFullscreen=!0,i.scrolling="no",i.style.border="0",i.style.width="100%";var o=document.createElement("div");return o.style.width="100%",o.appendChild(i),document.querySelector(e).appendChild(o),a(o,i)}t.includeZigGame=u,window.Zig={include:u,observe:a,registerHTTPHandlerOnly:function(e,t){void 0===t&&(t=void 0);var r=new n.MessageClient(e.contentWindow);i.registerRequestListener(r,t)}}}.apply(t,n))||(e.exports=i)},4:function(e,t,r){var n;void 0===(n=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KV={set:function(e,t){try{localStorage.setItem("kv."+e,JSON.stringify(t))}catch(r){console.log("Could not store KV:",e,t,r)}},get:function(e){try{var t=localStorage.getItem("kv."+e)||"null";return JSON.parse(t)}catch(t){return console.log("Could not read KV:",e,t),null}}}}.apply(t,[r,t]))||(e.exports=n)},6:function(e,t,r){var n,i,o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};n=[r,t,r(0)],void 0===(i=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeRequestLocally=function(e){return o(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return[4,i(this.request)];case 1:if((e=t.sent()).error)throw e.error;return[2,e.response]}})})};var n=r.logger("[zig-xhr]");function i(e){return o(this,void 0,void 0,function(){var t,r;return s(this,function(i){return n("Execute http request",e),(t=new XMLHttpRequest).open(e.method,e.path),Object.keys(e.headers||{}).forEach(function(r){t.setRequestHeader(r,e.headers[r])}),(r=/X-CSRF-TOKEN=([^;]+)/.exec(document.cookie||""))&&r[1]&&t.setRequestHeader("X-CSRF-TOKEN",r[1]),t.send(e.body),[2,new Promise(function(e){t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE){var r={response:{statusCode:t.status,body:t.responseText}};e(r)}},t.onerror=function(t){e({error:t.message||""})}})]})})}t.registerRequestListener=function(e,t){var r=this;void 0===t&&(t=i),e.register("zig.XMLHttpRequest.request",function(n){return o(r,void 0,void 0,function(){var r,i;return s(this,function(o){switch(o.label){case 0:return r=n.request,[4,t(r.data)];case 1:return i=o.sent(),e.send({command:"zig.XMLHttpRequest.result",result:{cid:r.cid,data:i}}),[2]}})})})};var a=1;t.executeRequestInParent=function(e,t){return o(this,void 0,void 0,function(){var r;return s(this,function(n){return r=t.path+":"+Date.now()+":"+a++,[2,new Promise(function(n,i){var o=function(t){var s=t.result;s.cid===r&&(e.unregister("zig.XMLHttpRequest.result",o),null!=s.data.error&&i(s.data.error),n(s.data.response))};e.register("zig.XMLHttpRequest.result",o),e.send({command:"zig.XMLHttpRequest.request",request:{cid:r,data:t}})})]})})}}.apply(t,n))||(e.exports=i)}});