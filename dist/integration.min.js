!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=39)}({0:function(e,t,n){var r,i;r=[n,t,n(1)],void 0===(i=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n.Options.logging&&console.log.apply(console,[e].concat(t))}},t.sleep=function(e){return new Promise(function(t){return window.setTimeout(t,e)})}}.apply(t,r))||(e.exports=i)},1:function(e,t,n){var r,i;r=[n,t,n(2)],void 0===(i=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Options={get logging(){return!0===n.KV.get("logging")},set logging(e){n.KV.set("logging",e)},get version(){return n.KV.get("version")||"latest"},set version(e){n.KV.set("version",e)},get winningClassOverride(){return n.KV.get("winning-class-override")},set winningClassOverride(e){n.KV.set("winning-class-override",e)},get debuggingLayer(){return this.logging||"latest"!==this.version||null!=this.winningClassOverride}}}.apply(t,r))||(e.exports=i)},2:function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KV={set:function(e,t){try{localStorage.setItem("kv."+e,JSON.stringify(t))}catch(n){console.log("Could not store KV:",e,t,n)}},get:function(e){try{var t=localStorage.getItem("kv."+e)||"null";return JSON.parse(t)}catch(t){return console.log("Could not read KV:",e,t),null}}}}.apply(t,[n,t]))||(e.exports=r)},3:function(e,t,n){var r,i;r=[n,t,n(0)],void 0===(i=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n.logger("[zig-msg]"),i=function(){function e(e){var t=this;this.partnerWindow=e,this.handlers={},this.eventHandler=function(e){return t.handleEvent(e)},window.addEventListener("message",this.eventHandler)}return e.prototype.close=function(){window.removeEventListener("message",this.eventHandler)},e.prototype.send=function(e){null!=e&&(r("Send message of type "+(e.command||e),e),this.partnerWindow.postMessage(e,"*"))},e.prototype.sendError=function(e){var t=o(e);null!=t&&(r("Sending error value:",t),this.partnerWindow.postMessage(t,"*"))},e.prototype.register=function(e,t){this.handlers[e]=(this.handlers[e]||[]).concat(t)},e.prototype.unregister=function(e,t){this.handlers[e]=(this.handlers[e]||[]).filter(function(e){return e!==t})},e.prototype.registerWildcard=function(e){this.register("*",e)},e.prototype.handleEvent=function(e){if(e.source===this.partnerWindow){var t="string"==typeof e.data?e.data:(e.data||{}).command;if(null==t&&e.data&&null!=e.data.type&&(t="error"),"string"==typeof t){var n=e.data,r=this.handlers[t]||[];r&&r.length?this.dispatch(n,r):this.dispatch(n,this.handlers["*"]||[])}}},e.prototype.dispatch=function(e,t){t.forEach(function(t){try{t(e)}catch(t){r("Error in handling message "+e+":",t)}})},e}();function o(e){if(null==e)return null;if(e.type&&e.title&&void 0!==e.status&&void 0!==e.details)return e;if("string"==typeof e.type&&"string"==typeof e.message)return{type:"urn:x-tipp24:remote-client-error",title:"Remote error",status:e.type,details:e.message};var t=e.responseText||e.body;if("string"==typeof t)try{var n=JSON.parse(t);if(n.error&&n.status)return{type:"urn:x-tipp24:remote-client-error",title:"Remote error",details:n.error,status:n.status};if(n.type&&n.title&&n.details)return n}catch(e){}return{type:"urn:x-tipp24:remote-client-error",title:"Remote error",status:500,details:e.toString()}}t.MessageClient=i,t.toErrorValue=o}.apply(t,r))||(e.exports=i)},39:function(e,t,n){var r,i;r=[n,t,n(0),n(3),n(8),n(6)],void 0===(i=function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n.logger("[zig-int]"),a=function(){function e(e,t){var n=this;this.wrapper=e,this.frame=t,this.messageClient=new r.MessageClient(t.contentWindow),this.messageClient.register("updateGameHeight",function(e){return n.updateGameHeight(e.height)}),this.messageClient.register("updateGameSettings",function(e){return n.updateGameSettings(e.gameSettings)}),i.registerRequestListener(this.messageClient),this.messageClient.registerWildcard(function(e){return s("Got message of type "+e.command)})}return e.prototype.destroy=function(){s("Destroy event listeners from frame"),this.messageClient.close()},e.prototype.updateGameHeight=function(e){this.frame.style.height=e+"px"},e.prototype.updateGameSettings=function(e){e.aspect>0&&(this.wrapper.style.position="relative",this.wrapper.style.paddingBottom=100/e.aspect+"%",this.frame.style.position="absolute",this.frame.style.height="100%")},e}();function u(e,t){var n=new a(e,t),r=new MutationObserver(function(e){for(var i=0,o=e;i<o.length;i++){var s=o[i];if("childList"===s.type)for(var a=0;a<s.removedNodes.length;a++)if(s.removedNodes.item(a)===t)return r.disconnect(),void n.destroy()}});return r.observe(e,{childList:!0}),n.messageClient}function c(e,t,n){var r=o.appendGameConfigToURL(t,n),i=document.createElement("iframe");i.src=r,i.allowFullscreen=!0,i.scrolling="no",i.style.border="0",i.style.width="100%";var s=document.createElement("div");return s.style.width="100%",s.appendChild(i),document.querySelector(e).appendChild(s),u(s,i)}function l(e,t){void 0===t&&(t=void 0);var n=new r.MessageClient(e.contentWindow);i.registerRequestListener(n,t)}t.zigObserveGame=u,t.includeZigGame=c,t.registerHTTPHandlerOnly=l,t.Zig={include:c,observe:u,registerHTTPHandlerOnly:l},window.Zig=t.Zig}.apply(t,r))||(e.exports=i)},6:function(e,t,n){var r;void 0===(r=function(e,t){"use strict";function n(e){return btoa(JSON.stringify(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.parseGameConfigFromURL=function(e){void 0===e&&(e=location.href);var t=/[?#].*\bconfig=([a-zA-Z0-9+/]+=*)/.exec(e);if(null==t)throw new Error("No config parameter found.");var n=t[1],r=JSON.parse(atob(n));if("string"!=typeof r.canonicalGameName)throw new Error("canonicalGameName not set in config.");return r},t.serializeGameConfig=n,t.appendGameConfigToURL=function(e,t){return e+(-1!==e.indexOf("#")?"&":"#")+"config="+n(t)}}.apply(t,[n,t]))||(e.exports=r)},8:function(e,t,n){var r,i,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};r=[n,t,n(0)],void 0===(i=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeRequestLocally=function(e){return o(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,a(e)];case 1:if((t=n.sent()).error)throw t.error;return[2,t.response]}})})};var r=n.logger("[zig-xhr]"),i=XMLHttpRequest;function a(e){return o(this,void 0,void 0,function(){var t,n;return s(this,function(o){return r("Execute http request",e),(t=new i).open(e.method,e.path),Object.keys(e.headers||{}).forEach(function(n){t.setRequestHeader(n,e.headers[n])}),Object.keys(e.extraSettings||{}).forEach(function(n){t[n]=e.extraSettings[n]}),(n=/X-CSRF-TOKEN=([^;]+)/.exec(document.cookie||""))&&n[1]&&t.setRequestHeader("X-CSRF-TOKEN",n[1]),t.send(e.body),[2,new Promise(function(e){t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE){var n=null;""!==t.responseType&&"text"!==t.responseType||(n=t.responseText);var r={response:{statusCode:t.status,body:n,xhr:t}};e(r)}},t.onerror=function(t){e({error:t.message||""})}})]})})}t.registerRequestListener=function(e,t){var n=this;void 0===t&&(t=a),e.register("zig.XMLHttpRequest.request",function(r){return o(n,void 0,void 0,function(){var n,i;return s(this,function(o){switch(o.label){case 0:return n=r.request,[4,t(n.data)];case 1:return(i=o.sent()).response&&delete i.response.xhr,e.send({command:"zig.XMLHttpRequest.result",result:{cid:n.cid,data:i}}),[2]}})})})};var u=1;t.executeRequestInParent=function(e,t){return o(this,void 0,void 0,function(){var n;return s(this,function(r){return n=t.path+":"+Date.now()+":"+u++,[2,new Promise(function(r,i){var o=function(t){var s=t.result;s.cid===n&&(e.unregister("zig.XMLHttpRequest.result",o),null!=s.data.error&&i(s.data.error),r(s.data.response))};e.register("zig.XMLHttpRequest.result",o),e.send({command:"zig.XMLHttpRequest.request",request:{cid:n,data:t}})})]})})}}.apply(t,r))||(e.exports=i)}});